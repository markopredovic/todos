(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(56)},27:function(e,t,n){},28:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(7),c=n.n(r),i=(n(27),n(2)),l=(n(28),n(20)),u=n.n(l),s=Object(o.createContext)({todos:[],addTodo:function(){},removeTodo:function(){},toggleTodo:function(){}}),d={content:{top:"20%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"500px"}},p=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)(null),n=Object(o.useRef)(null),r=Object(o.useRef)(null),c=Object(o.useState)(!0),l=Object(i.a)(c,2),p=l[0],m=l[1],f=Object(o.useState)({}),y=Object(i.a)(f,2),E=y[0],b=y[1],v=Object(o.useContext)(s);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"addTodoForm"},a.a.createElement("a",{href:"#",className:"btn btn-toggle",onClick:function(e){e.preventDefault(),m(!p)}},!0===p?"Hide":"Show"," form"),a.a.createElement("form",{onSubmit:function(o){o.preventDefault();var a={id:Date.now(),name:e.current.value,isCompleted:!1,priority:t.current.value,type:n.current.value},r=function(e){var t={};return 0===e.name.length&&(t.name="Insert todo text"),"null"===e.priority&&(t.priority="Select priority"),t}(a);console.log(r),0===Object.keys(r).length?(v.addTodo(a),t.current.value=null,n.current.value=null,e.current.value=null):b(r)},style:{display:p?"block":"none"}},a.a.createElement("div",{className:"l-field"},a.a.createElement("select",{ref:t},a.a.createElement("option",{value:"null"},"Select Priority:"),a.a.createElement("option",{value:"A"},"A"),a.a.createElement("option",{value:"B"},"B"),a.a.createElement("option",{value:"C"},"C")),a.a.createElement("select",{ref:n},a.a.createElement("option",{value:"null"},"Select Type:"),a.a.createElement("option",{value:"common"},"Common"),a.a.createElement("option",{value:"learning"},"Learning"),a.a.createElement("option",{value:"reminder"},"Reminder"),a.a.createElement("option",{value:"other"},"Other"))),a.a.createElement("div",{className:"l-field"},a.a.createElement("input",{type:"text",placeholder:"add todo...",ref:e}),a.a.createElement("button",{type:"submit"},"add todo")))),a.a.createElement(u.a,{isOpen:Object.keys(E).length>0,onAfterOpen:function(){r.current.style.color="#000"},onRequestClose:function(){b({})},style:d},a.a.createElement("div",{ref:r},a.a.createElement("h3",null,"Validation errors"),a.a.createElement("ul",null,Object.keys(E).map(function(e,t){return a.a.createElement("li",{key:t},E[e])})))))},m=function(e){var t=e.id,n=e.priority,r=e.type,c=e.name,i=e.isCompleted,l=e.parentId,u=Object(o.useContext)(s);return a.a.createElement("div",{className:"l-todo m-todo ".concat("A"===n?"priority-a":"B"===n?"priority-b":"priority-c")},a.a.createElement("span",{className:"description",onClick:function(){return u.toggleTodo({id:t,priority:n,type:r,name:c,isCompleted:!i,parentId:l})},style:{textDecoration:i?"line-through":"inherit"}},c),a.a.createElement("button",{onClick:function(){return u.removeTodo(l)}},a.a.createElement("span",{className:"close"},"\u2716")))},f=function(){var e=Object(o.useContext)(s),t="Loading...";return e.todos&&(t=e.todos.map(function(e,t){return a.a.createElement(m,Object.assign({key:t},e))})),a.a.createElement("div",{className:"l-todoList"},t)},y=n(5),E=n(4),b=function(e,t){switch(t.type){case"ADD_TODO":return Object(E.a)({},e,{todos:[].concat(Object(y.a)(e.todos),[t.payload])});case"REMOVE_TODO":return v(e,t.payload);case"TOGGLE_TODO":return O(e,t.payload);case"GET_LIST":return Object(E.a)({},e,{todos:t.payload});default:return e}},v=function(e,t){var n=Object(y.a)(e.todos),o=n.findIndex(function(e){return e.parentId===t});return n.splice(o,1),Object(E.a)({},e,{todos:n})},O=function(e,t){var n=Object(y.a)(e.todos).map(function(e){return e.id===t.id?{id:e.id,priority:e.priority,type:e.type,name:e.name,isCompleted:t.isCompleted,parentId:e.parentId}:e});return Object(E.a)({},e,{todos:n})},h=n(3),j=n.n(h),g=function(){var e=Object(o.useReducer)(b,{todos:[{id:1,name:"REact learning",isCompleted:!1}]}),t=Object(i.a)(e,2),n=t[0],r=t[1];Object(o.useEffect)(function(){j.a.get("https://react-proba.firebaseio.com/todos.json").then(function(e){return e.data}).then(function(e){var t=[];for(var n in e){var o=e[n];o.parentId=n,t.push(o)}t.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),r({type:"GET_LIST",payload:t})})},[]);return a.a.createElement(s.Provider,{value:{todos:n.todos,addTodo:function(e){j.a.post("https://react-proba.firebaseio.com/todos.json",{id:e.id,priority:e.priority,type:e.type,name:e.name,isCompleted:!1}).then(function(e){return e.data}).then(function(t){e.parentId=t.name,r({type:"ADD_TODO",payload:e})})},removeTodo:function(e){j.a.delete("https://react-proba.firebaseio.com/todos/".concat(e,".json")).then(function(){r({type:"REMOVE_TODO",payload:e})})},toggleTodo:function(e){j.a.patch("https://react-proba.firebaseio.com/todos/".concat(e.parentId,".json"),{isCompleted:e.isCompleted}).then(function(){r({type:"TOGGLE_TODO",payload:e})})}}},a.a.createElement("div",{className:"l-app-todo"},a.a.createElement("h1",{className:"title-page"},"Todo list"),a.a.createElement(p,null),a.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.7be3f576.chunk.js.map