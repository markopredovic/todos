(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(56)},27:function(e,t,n){},28:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(7),c=n.n(r),l=(n(27),n(2)),i=(n(28),n(20)),u=n.n(i),d=Object(o.createContext)({todos:[],addTodo:function(){},removeTodo:function(){},toggleTodo:function(){}}),s={content:{top:"20%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"500px"}},p=function(){var e=Object(o.useRef)(null),t=Object(o.useRef)(null),n=Object(o.useRef)(null),r=Object(o.useRef)(null),c=Object(o.useState)(!0),i=Object(l.a)(c,2),p=i[0],m=i[1],f=Object(o.useState)({}),y=Object(l.a)(f,2),v=y[0],E=y[1],O=Object(o.useContext)(d);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"addTodoForm"},a.a.createElement("a",{href:"#",className:"btn btn-toggle",onClick:function(e){e.preventDefault(),m(!p)}},!0===p?"Hide":"Show"," form"),a.a.createElement("form",{onSubmit:function(o){o.preventDefault();var a={id:Date.now(),name:e.current.value,isCompleted:!1,priority:t.current.value,type:n.current.value},r=function(e){var t={};return 0===e.name.length&&(t.name="Insert todo text"),"null"===e.priority&&(t.priority="Select priority"),t}(a);console.log(r),0===Object.keys(r).length?(O.addTodo(a),t.current.value=null,n.current.value=null,e.current.value=null):E(r)},style:{display:p?"block":"none"}},a.a.createElement("div",{className:"l-field"},a.a.createElement("select",{ref:t},a.a.createElement("option",{value:"null"},"Select Priority:"),a.a.createElement("option",{value:"A"},"A"),a.a.createElement("option",{value:"B"},"B"),a.a.createElement("option",{value:"C"},"C")),a.a.createElement("select",{ref:n},a.a.createElement("option",{value:"null"},"Select Type:"),a.a.createElement("option",{value:"common"},"Common"),a.a.createElement("option",{value:"learning"},"Learning"),a.a.createElement("option",{value:"reminder"},"Reminder"),a.a.createElement("option",{value:"other"},"Other"))),a.a.createElement("div",{className:"l-field"},a.a.createElement("input",{type:"text",placeholder:"add todo...",ref:e}),a.a.createElement("button",{type:"submit"},"add todo")))),a.a.createElement(u.a,{isOpen:Object.keys(v).length>0,onAfterOpen:function(){r.current.style.color="#000"},onRequestClose:function(){E({})},style:s},a.a.createElement("div",{ref:r},a.a.createElement("h3",null,"Validation errors"),a.a.createElement("ul",null,Object.keys(v).map(function(e,t){return a.a.createElement("li",{key:t},v[e])})))))},m=function(e){var t=e.id,n=e.priority,r=e.type,c=e.name,l=e.isCompleted,i=e.parentId,u=Object(o.useContext)(d);return a.a.createElement("div",{className:"l-todo m-todo ".concat("A"===n?"priority-a":"B"===n?"priority-b":"priority-c")},a.a.createElement("span",{className:"description",onClick:function(){return u.toggleTodo({id:t,priority:n,type:r,name:c,isCompleted:!l,parentId:i})},style:{textDecoration:l?"line-through":"inherit"}},c),a.a.createElement("button",{onClick:function(){return u.removeTodo(i)}},a.a.createElement("span",{className:"close"},"\u2716")))},f=function(){var e=Object(o.useContext)(d);console.log("Todo list rendering");var t="Loading...";return e.todos&&(t=e.todos.map(function(e,t){return a.a.createElement(m,Object.assign({key:t},e))})),a.a.createElement("div",{className:"l-todoList"},t)},y=n(5),v=n(4),E=function(e,t){switch(t.type){case"ADD_TODO":return Object(v.a)({},e,{todos:[].concat(Object(y.a)(e.todos),[t.payload])});case"REMOVE_TODO":return O(e,t.payload);case"TOGGLE_TODO":return b(e,t.payload);case"GET_LIST":return Object(v.a)({},e,{todos:t.payload});default:return e}},O=function(e,t){var n=Object(y.a)(e.todos),o=n.findIndex(function(e){return e.parentId===t});return n.splice(o,1),Object(v.a)({},e,{todos:n})},b=function(e,t){var n=Object(y.a)(e.todos).map(function(e){return e.id===t.id?{id:e.id,priority:e.priority,type:e.type,name:e.name,isCompleted:t.isCompleted,parentId:e.parentId}:e});return Object(v.a)({},e,{todos:n})},h=n(3),g=n.n(h),j=function(e){var t=Object(o.useReducer)(E,{todos:[{id:1,name:"REact learning",isCompleted:!1}]}),n=Object(l.a)(t,2),a=n[0],r=n[1];Object(o.useEffect)(function(){g.a.get(e).then(function(e){return e.data}).then(function(e){var t=[];for(var n in e){var o=e[n];o.parentId=n,t.push(o)}t.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}),r({type:"GET_LIST",payload:t})})},[e]);return[a.todos,function(t){g.a.post(e,{id:t.id,priority:t.priority,type:t.type,name:t.name,isCompleted:!1}).then(function(e){return e.data}).then(function(e){t.parentId=e.name,r({type:"ADD_TODO",payload:t})})},function(e){g.a.delete("https://react-proba.firebaseio.com/todos/".concat(e,".json")).then(function(){r({type:"REMOVE_TODO",payload:e})}).catch(function(e){return console.log("Remove error: ",e)})},function(e){g.a.patch("https://react-proba.firebaseio.com/todos/".concat(e.parentId,".json"),{isCompleted:e.isCompleted}).then(function(){r({type:"TOGGLE_TODO",payload:e})})}]},T=function(){var e=j("https://react-proba.firebaseio.com/todos.json"),t=Object(l.a)(e,4),n=t[0],o=t[1],r=t[2],c=t[3];return a.a.createElement(d.Provider,{value:{todos:n,addTodo:o,removeTodo:r,toggleTodo:c}},a.a.createElement("div",{className:"l-app-todo"},a.a.createElement("h1",{className:"title-page"},"Todo list"),a.a.createElement(p,null),a.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.6de9de92.chunk.js.map